{% extends "marketplace/base.html" %}

{% block content %}
  <div class="container mt-5">
    <div class="card shadow-sm" >
      <div class="card-header  text-white text-center" style="background-color:#bb2d3b" >
        <h1 class="h5 mb-0">Cadastrar Produto</h1>
      </div>
      <div class="card-body">
        <form method="POST" enctype="multipart/form-data">
          {% csrf_token %}

          <!-- Nome do Produto -->
          <div class="row mb-3 align-items-center">
            <div class="col-md-3">
              <label for="id_nome" class="form-label">Nome do Produto</label>
            </div>
            <div class="col-md-9">
              <input type="text" id="id_nome" name="nome" class="form-control">
            </div>
          </div>

          <!-- Descrição -->
          <div class="row mb-3 align-items-center">
            <div class="col-md-3">
              <label for="id_descricao" class="form-label">Descrição</label>
            </div>
            <div class="col-md-9">
              <textarea id="id_descricao" name="descricao" class="form-control" rows="3"></textarea>
            </div>
          </div>

          <!-- Preço -->
          <div class="row mb-3 align-items-center">
            <div class="col-md-3">
              <label for="id_preco" class="form-label">Preço</label>
            </div>
            <div class="col-md-9">
              <input type="text" id="id_preco" name="preco" class="form-control">
            </div>
          </div>

          <!-- Disponibilidade -->
          <div class="row mb-3 align-items-center">
            <div class="col-md-3">
              <label for="id_disponibilidade" class="form-label">Disponibilidade</label>
            </div>
            <div class="col-md-9">
              <div class="form-check form-switch">
                <input type="checkbox" id="id_disponibilidade" name="disponibilidade" class="form-check-input">
              
              </div>
            </div>
          </div>
          <!-- N mero de Produtos -->
          <div class="row mb-3 align-items-center">
            <div class="col-md-3">
              <label for="id_num_produtos" class="form-label">Número de Produtos</label>
            </div>
            <div class="col-md-9">
              <input type="number" id="id_num_produtos" name="num_produtos" class="form-control" min="1" value="1">
            </div>
          </div>
          <!-- Foto do Produto -->
          <div class="row mb-3 align-items-center">
            <div class="col-md-3">
              <label for="photoUpload" class="form-label">Foto do Produto</label>
            </div>
            <div class="col-md-9">
              <input 
                type="file" 
                id="photoUpload" 
                name="foto" 
                accept="image/*" 
                class="form-control" 
                onchange="previewPhoto(event)">
              <div class="mt-3">
                <img id="photoPreview" src="#" alt="Preview da Foto" class="img-thumbnail d-none" style="max-width: 200px;">
              </div>
            </div>
          </div>

          <!-- Botão de Envio -->
          <div class="d-grid">
            <button type="submit" class="btn btn-primary btn-block">Cadastrar Produto</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <script>
    // Função para pré-visualizar a imagem
    function previewPhoto(event) {
      const photoPreview = document.getElementById('photoPreview');
      const file = event.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function (e) {
          photoPreview.src = e.target.result;
          photoPreview.classList.remove('d-none');
        };
        reader.readAsDataURL(file);
      }
    }
  </script>
{% endblock %}
